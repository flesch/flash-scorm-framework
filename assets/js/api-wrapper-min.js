!function(){function f(a,b,c){if(a===null)return;if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++)if(d in a&&b.call(c,a[d],d,a)===e)return}else for(var g in a)if(a.hasOwnProperty(g)&&b.call(c,a[g],g,a)===e)return}function g(a,b){var c=b-a,d,e,f;return d=/[0-9]{4}$/.exec("000"+Math.floor(c/36e5)),e=Math.floor(c%36e5/6e4),f=Math.floor(c%36e5%6e4/1e3),[d,e<10?"0"+e:e,f<10?"0"+f:f].join(":")}function h(b){if(d[b])return d[b];var c;return(a&&c=a.LMSGetValue(b)&&+a.LMSGetLastError()===0)?(d[b]=c,d[b]):null}function i(a,b){return d[a]=typeof b!="string"?JSON.stringify(b):b,d[a]}function j(){return Number(a.LMSGetLastError())||null}function k(b){return a.LMSGetErrorString(String(b))||null}function l(b){return a.LMSGetDiagnostic(String(b))||null}function m(){if(a){var b=!1;f(d,function(c,f,g){if(d[c]&&!/cmi\.core\.student_(id|name)/.test(c))return a.LMSSetValue(c,d[c])==="true"&&+a.LMSGetLastError()===0?(b=!0,!0):(b=!1,e)});if(b&&a.LMSCommit("")==="true"&&+a.LMSGetLastError()===0)return!0}return!1}function n(){if(a&&a.LMSInitialize("")==="true"&&/0|101/.test(+a.LMSGetLastError())){c=+(new Date),/(pass|complet)ed?/.test(h("cmi.core.lesson_status"))||i("cmi.core.lesson_status","incomplete"),b.parent.frames.SCODataFrame&&b.mode==="test"&&(b.parent.frames.SCODataFrame._displaySuccess=b.parent.frames.SCODataFrame.displaySuccess,b.parent.frames.SCODataFrame.displaySuccess=function(){});var d=window.setInterval(function(){try{a.LMSSetValue("cmi.core.lesson_location",a.LMSGetValue("cmi.core.lesson_location"))}catch(b){}a.LMSCommit("")!=="true"&&+a.LMSGetLastError()!==0&&(window.clearInterval(d),window.onLMSConnectionError&&window.onLMSConnectionError())},3e5);return!0}return!1}function o(){if(a){i("cmi.core.session_time",g(c,+(new Date)));if(m()&&a.LMSFinish("")==="true")return b.parent.frames.SCODataFrame&&(b.mode==="test"&&"_displaySuccess"in b.parent.frames.SCODataFrame&&b.parent.frames.SCODataFrame._displaySuccess.call(b),b.parent.frames.SCODataFrame.cleanup=function(){},b.location.href=b.location.href),!0}return!1}var a,b,c,d=[],e={};a=function(a){var c=arguments.callee;b=a||window;if(!b.API){if(b!==b.parent)return c.call(this,b.parent);if(b.opener!==null&&typeof b.opener!="undefined"&&!b.opener.closed)return c.call(this,b.opener)}return b.API}.call(this),window.getAPI=function(){return a},window.LMSInitialize=n,window.LMSCommit=m,window.LMSFinish=o,window.LMSGetValue=h,window.LMSSetValue=i,window.LMSGetLastError=j,window.LMSGetErrorString=k,window.LMSGetDiagnostic=l}.call(this)